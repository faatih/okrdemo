# Story 1.1: Project Setup & Health Check

## Status
Draft

## Story
**As a** developer,
**I want** a fully configured Next.js project with TypeScript, Tailwind v4, shadcn/ui, Drizzle ORM, and Vercel deployment,
**so that** the team has a solid foundation to build features and a health check endpoint to verify deployments.

## Acceptance Criteria
1. Next.js 14+ App Router project initialized with TypeScript, ESLint, Prettier
2. Tailwind CSS v4 configured with shadcn/ui component library installed
3. Drizzle ORM configured with PostgreSQL connection (Vercel Postgres or Neon)
4. Git repository created with `.gitignore`, initial commit, and `main` branch
5. Vercel project linked with CI/CD pipeline (auto-deploy on push to `main`, preview on PRs)
6. Health check API route (`/api/health`) returns `{ status: "ok", timestamp: <ISO> }` with 200 status
7. Root page (`/`) displays "RunwayOKR" heading and link to health check (temporary landing page)
8. README.md includes setup instructions, environment variable template, and architecture overview
9. Project successfully deploys to Vercel and health check endpoint is accessible

## Tasks / Subtasks

- [ ] **Verify starter pack setup is complete** (AC: 1, 2, 3, 4)
  - [ ] ✅ Verify Next.js 15.3.1 with App Router, TypeScript, ESLint (ALREADY COMPLETE - from starter)
  - [ ] ✅ Verify Tailwind CSS 4.1.7 and shadcn/ui installed (ALREADY COMPLETE - from starter)
  - [ ] ✅ Verify Drizzle ORM 0.43.1 with Neon configured (ALREADY COMPLETE - from starter)
  - [ ] ✅ Verify Git repository initialized with remote (ALREADY COMPLETE - https://github.com/faatih/okrdemo.git)
  - [ ] Review and understand existing starter pack structure

- [ ] **Clean up starter pack artifacts not needed for RunwayOKR** (AC: 1, 2)
  - [ ] Remove unnecessary pages: `app/pricing/`, `app/success/`, `app/privacy-policy/`, `app/terms-of-service/`
  - [ ] Remove starter-specific components: `app/dashboard/_components/chatbot.tsx` (AI chat not in PRD)
  - [ ] Remove starter API routes not needed: `app/api/chat/`, `app/api/subscription/`, `app/api/upload-image/`
  - [ ] Clean up `db/schema.ts` - remove subscription table (Polar.sh not in PRD scope)
  - [ ] Keep Better Auth tables (user, session, account, verification) for Story 1.3

- [ ] **Configure Prettier** (AC: 1)
  - [ ] Add `.prettierrc` with base config (align with coding standards)
  - [ ] Add `.prettierignore` file
  - [ ] Run `npx prettier --write .` to format existing code

- [ ] **Create health check API route** (AC: 6)
  - [ ] Create file at `app/api/health/route.ts` [Source: architecture/backend-architecture.md#Function Organization]
  - [ ] Implement GET handler returning JSON: `{ status: "ok", timestamp: new Date().toISOString() }`
  - [ ] Use standard 200 status code
  - [ ] Optional: Add database connection verification (simple query to verify Neon is accessible)

- [ ] **Replace landing page with RunwayOKR temporary page** (AC: 7)
  - [ ] Replace `app/page.tsx` content with "RunwayOKR" heading (h1)
  - [ ] Add link to `/api/health` with text "Health Check"
  - [ ] Apply basic Tailwind styling (centered layout, simple and clean)
  - [ ] Remove starter pack landing page content

- [ ] **Update README.md for RunwayOKR project** (AC: 8)
  - [ ] Replace starter pack description with "RunwayOKR - OKR Tracking SaaS"
  - [ ] Update project overview to describe RunwayOKR purpose (CSV import to OKR transformation)
  - [ ] Keep local setup instructions (clone, install, configure `.env`, run dev server)
  - [ ] Keep environment variable documentation (add RunwayOKR-specific vars if needed)
  - [ ] Update architecture overview: Focus on Next.js App Router, Drizzle ORM, Neon PostgreSQL
  - [ ] Remove starter pack features not in RunwayOKR scope (Polar.sh, OpenAI, PostHog, etc.)

- [ ] **Verify or configure Vercel deployment** (AC: 5, 9)
  - [ ] Check if Vercel project is already linked (run `vercel` command or check `.vercel/` directory)
  - [ ] If not linked: Link repository to Vercel project (import from Vercel dashboard)
  - [ ] Verify environment variable `DATABASE_URL` is configured in Vercel project settings
  - [ ] Push to `main` branch and verify auto-deploy triggers
  - [ ] Access production URL and verify root page displays "RunwayOKR"
  - [ ] Access `https://<vercel-url>/api/health` and verify JSON response with 200 status
  - [ ] Verify preview deployments work on pull requests

## Dev Notes

### Previous Story Insights
No previous story exists. This is the first story in the project.

### Starter Pack Context
**IMPORTANT:** This project is based on "Next.js SaaS Starter Kit 2.0" which already includes:
- ✅ Next.js 15.3.1 with App Router, TypeScript, ESLint
- ✅ Tailwind CSS 4.1.7 with shadcn/ui component library
- ✅ Drizzle ORM 0.43.1 with Neon PostgreSQL connection
- ✅ Better Auth 1.2.8 (authentication system, will be used in Story 1.3)
- ✅ Git repository initialized with remote: https://github.com/faatih/okrdemo.git
- ✅ Basic project structure with `app/`, `components/`, `db/`, `lib/`, `hooks/` directories

**What needs to be done:**
1. Clean up starter pack features NOT in RunwayOKR scope (Polar.sh subscriptions, OpenAI chat, PostHog analytics, file uploads)
2. Create health check endpoint
3. Replace landing page with RunwayOKR branding
4. Update README to reflect RunwayOKR project (remove starter pack references)
5. Verify/configure Vercel deployment

**Starter Pack Files to Remove:**
- Pages: `app/pricing/`, `app/success/`, `app/privacy-policy/`, `app/terms-of-service/`
- Components: `app/dashboard/_components/chatbot.tsx`
- API Routes: `app/api/chat/`, `app/api/subscription/`, `app/api/upload-image/`
- Schema: Remove `subscription` table from `db/schema.ts` (keep Better Auth tables)

**Starter Pack Files to Keep:**
- Better Auth integration (user, session, account, verification tables) - needed for Story 1.3
- Dashboard layout structure (can be refactored in later stories)
- shadcn/ui components in `components/ui/`
- Core utilities in `lib/`

### Tech Stack Details
[Source: architecture/tech-stack.md#Technology Stack Table]

**Core Technologies:**
- **Frontend Framework:** Next.js 15.3.1 (PRD specifies 14+, starter has 15.3.1)
- **Frontend Language:** TypeScript 5.x
- **UI Component Library:** shadcn/ui + Radix UI (WCAG AA compliant)
- **CSS Framework:** Tailwind CSS 4.1.7
- **Database:** Neon PostgreSQL 15+
- **ORM:** Drizzle ORM 0.43.1 (generates TypeScript types from schema)
- **Build Tool:** Next.js CLI + Turbopack (dev) + Webpack (prod)
- **Bundler:** Turbopack for dev speed, Webpack for stable production builds
- **Icons:** Lucide React 0.503.0
- **Date Utilities:** date-fns 4.1.0
- **Toast Notifications:** Sonner 2.0.3

**Development Tools:**
- **Frontend Testing:** Vitest + React Testing Library (defer to later stories)
- **Backend Testing:** Vitest (defer to later stories)
- **CI/CD:** Vercel Git Integration (auto-deploy on push to `main`, preview on PRs)
- **Monitoring:** Vercel Analytics (basic, free tier)
- **Logging:** Vercel Logs (console.* outputs)

### Project Structure
[Source: architecture/unified-project-structure.md]

The following directory structure should be established (initial setup):
```
okrdemo/
├── app/                        # Next.js App Router
│   ├── api/                    # API Routes (Serverless)
│   │   └── health/route.ts     # Story 1.1
│   ├── layout.tsx
│   ├── page.tsx                # Temporary landing page
│   └── globals.css
├── components/
│   └── ui/                     # shadcn/ui primitives (installed)
├── db/
│   ├── drizzle.ts              # Database connection
│   └── schema.ts               # Schema definitions (empty for now)
├── lib/                        # Utilities (minimal for now)
├── public/                     # Static assets
├── .env                        # Environment variables (not committed)
├── .gitignore
├── drizzle.config.ts
├── next.config.ts
├── package.json
├── tailwind.config.ts
├── tsconfig.json
└── README.md
```

### API Route Standards
[Source: architecture/backend-architecture.md#Function Organization]

Health check endpoint location: `app/api/health/route.ts`

Standard response format:
```typescript
export async function GET() {
  return Response.json({
    status: "ok",
    timestamp: new Date().toISOString()
  }, { status: 200 });
}
```

### Coding Standards
[Source: architecture/coding-standards.md#Critical Fullstack Rules]

**Critical Rules for This Story:**
- **Environment Variables:** Access only through config objects, never `process.env` directly in components (API routes can use `process.env.DATABASE_URL`)
- **Error Handling:** All API routes must use standard error format (basic for health check)
- **Database Queries:** Always use Drizzle ORM query builder, never raw SQL

**Naming Conventions:**
- API Routes: kebab-case (e.g., `/api/health`)
- Components: PascalCase (not needed for this story)
- Database Tables: snake_case (for Story 1.2)

### Drizzle ORM Configuration
[Source: architecture/tech-stack.md#Technology Stack Table]

**Database Connection:**
- Use Neon PostgreSQL serverless driver: `@neondatabase/serverless`
- Connection string format: `postgresql://user:pass@host/dbname?sslmode=require`
- Store in environment variable: `DATABASE_URL`

**File Structure:**
- `db/drizzle.ts`: Database client initialization
- `db/schema.ts`: Schema definitions (empty for this story, populated in Story 1.2)
- `drizzle.config.ts`: Drizzle Kit configuration for migrations

### Vercel Deployment
[Source: architecture/tech-stack.md#Technology Stack Table]

**Deployment Configuration:**
- Platform: Vercel
- CI/CD: Vercel Git Integration (native)
- Auto-deploy: Push to `main` branch
- Preview deployments: Pull requests
- Environment variables: Configure in Vercel dashboard (Project Settings → Environment Variables)

**Required Environment Variables:**
- `DATABASE_URL`: Neon PostgreSQL connection string (must be configured in Vercel before deployment)

### Testing
[Source: architecture/testing-strategy.md#Testing Pyramid]

**Testing Framework:** Vitest for all tests (unit + integration)

**For This Story:**
- Manual verification of health check endpoint (GET request returns correct JSON)
- Visual verification of root page rendering
- Deployment verification (Vercel preview and production URLs accessible)
- Unit/integration tests deferred to later stories when test infrastructure is fully set up

**Future Testing Requirements:**
- API route integration tests will use test database (Story 1.2+)
- Test files will be organized in `tests/` directory
- Use React Testing Library for component tests (Story 1.8+)

### Project Structure Alignment Notes
All file paths and naming conventions align with the unified project structure defined in `docs/architecture/unified-project-structure.md`. No conflicts detected between epic requirements and architecture documentation.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-06 | 1.0 | Initial story creation | Bob (Scrum Master) |
| 2025-10-06 | 1.1 | Updated to reflect Next.js SaaS Starter Kit 2.0 base; revised tasks to focus on cleanup and customization instead of full setup | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
_To be populated by Dev Agent during implementation_

### Debug Log References
_To be populated by Dev Agent during implementation_

### Completion Notes List
_To be populated by Dev Agent during implementation_

### File List
_To be populated by Dev Agent during implementation_

## QA Results
_To be populated by QA Agent after story completion_
